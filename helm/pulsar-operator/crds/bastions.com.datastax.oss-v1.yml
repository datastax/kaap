# Generated by Fabric8 CRDGenerator, manual edits might get overwritten!
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: bastions.com.datastax.oss
spec:
  group: com.datastax.oss
  names:
    kind: Bastion
    plural: bastions
    shortNames:
    - ba
    - bs
    singular: bastion
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              bastion:
                properties:
                  gracePeriod:
                    description: Termination grace period in seconds for the Autorecovery
                      pod. Default value is 60.
                    minimum: 0.0
                    type: integer
                  replicas:
                    description: Replicas of this component.
                    type: integer
                  image:
                    description: Pulsar image to use for this component.
                    type: string
                  nodeSelectors:
                    additionalProperties:
                      type: string
                    description: Additional node selectors for this component.
                    type: object
                  annotations:
                    additionalProperties:
                      type: string
                    description: Annotations to add to each Autorecovery resource.
                    type: object
                  resources:
                    description: Resource requirements for the Autorecovery container.
                    properties:
                      limits:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          x-kubernetes-int-or-string: true
                        type: object
                      requests:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          x-kubernetes-int-or-string: true
                        type: object
                    type: object
                  targetProxy:
                    description: Indicates to connect to proxy or the broker. The
                      default value depends whether Proxy is deployed or not.
                    type: boolean
                  imagePullPolicy:
                    description: Pulsar image pull policy to use for this component.
                    type: string
                  config:
                    additionalProperties:
                      type: string
                    description: Configuration entries directly passed to this component.
                    type: object
                type: object
              global:
                properties:
                  components:
                    description: Pulsar cluster components names.
                    properties:
                      brokerBaseName:
                        description: Broker base name. Default value is 'broker'.
                        type: string
                      zookeeperBaseName:
                        description: Zookeeper base name. Default value is 'zookeeper'.
                        type: string
                      functionsWorkerBaseName:
                        description: Functions Worker base name. Default value is
                          'function'.
                        type: string
                      autorecoveryBaseName:
                        description: Autorecovery base name. Default value is 'autorecovery'.
                        type: string
                      bookkeeperBaseName:
                        description: BookKeeper base name. Default value is 'bookkeeper'.
                        type: string
                      bastionBaseName:
                        description: Bastion base name. Default value is 'bastion'.
                        type: string
                      proxyBaseName:
                        description: Proxy base name. Default value is 'proxy'.
                        type: string
                    type: object
                  dnsConfig:
                    description: Additional DNS config for each pod created by the
                      operator.
                    properties:
                      nameservers:
                        items:
                          type: string
                        type: array
                      searches:
                        items:
                          type: string
                        type: array
                      options:
                        items:
                          properties:
                            value:
                              type: string
                            name:
                              type: string
                          type: object
                        type: array
                    type: object
                  restartOnConfigMapChange:
                    description: |
                      By default, Kubernetes will not restart pods when only their configmap is changed. This setting will restart pods when their configmap is changed using an annotation that calculates the checksum of the configmap.
                    type: boolean
                  image:
                    description: Default Pulsar image to use. Any components can be
                      configured to use a different image.
                    type: string
                  auth:
                    description: |
                      Auth stuff.
                    properties:
                      token:
                        properties:
                          privateKeyFile:
                            description: Indicates if the Pdb policy is enabled for
                              this component.
                            type: string
                          provisioner:
                            description: Indicates if the Pdb policy is enabled for
                              this component.
                            properties:
                              initialize:
                                description: Indicates if the Pdb policy is enabled
                                  for this component.
                                type: boolean
                              rbac:
                                description: Resource requirements for the ZooKeeper
                                  pod.
                                properties:
                                  namespaced:
                                    description: Whether or not the RBAC is created
                                      per-namespace or for the cluster.
                                    type: boolean
                                  create:
                                    description: Create needed RBAC to run the Functions
                                      Worker.
                                    type: boolean
                                type: object
                              image:
                                description: Indicates if the Pdb policy is enabled
                                  for this component.
                                type: string
                              resources:
                                description: Resource requirements for the ZooKeeper
                                  pod.
                                properties:
                                  limits:
                                    additionalProperties:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      x-kubernetes-int-or-string: true
                                    type: object
                                  requests:
                                    additionalProperties:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      x-kubernetes-int-or-string: true
                                    type: object
                                type: object
                              imagePullPolicy:
                                description: Indicates if the Pdb policy is enabled
                                  for this component.
                                type: string
                            type: object
                          proxyRoles:
                            description: Indicates if the Pdb policy is enabled for
                              this component.
                            items:
                              type: string
                            type: array
                          publicKeyFile:
                            description: Indicates if the Pdb policy is enabled for
                              this component.
                            type: string
                          superUserRoles:
                            description: Indicates if the Pdb policy is enabled for
                              this component.
                            items:
                              type: string
                            type: array
                        type: object
                      enabled:
                        description: Indicates if the Pdb policy is enabled for this
                          component.
                        type: boolean
                    type: object
                  persistence:
                    description: |
                      If persistence is enabled, components that has state will be deployed with PersistentVolumeClaims, otherwise, for test purposes, they will be deployed with emptDir
                    type: boolean
                  storage:
                    description: Storage configuration.
                    properties:
                      storageClass:
                        description: Indicates if a StorageClass is used. The operator
                          will create the StorageClass if needed.
                        properties:
                          extraParams:
                            additionalProperties:
                              type: string
                            description: Adds extra parameters for the StorageClass.
                            type: object
                          provisioner:
                            description: Indicates the provisioner property for the
                              StorageClass.
                            type: string
                          type:
                            description: Indicates the 'type' parameter for the StorageClass.
                            type: string
                          fsType:
                            description: Indicates the 'fsType' parameter for the
                              StorageClass.
                            type: string
                          reclaimPolicy:
                            description: Indicates the reclaimPolicy property for
                              the StorageClass.
                            type: string
                        type: object
                      existingStorageClassName:
                        description: Indicates if an already existing storage class
                          should be used.
                        type: string
                    type: object
                  kubernetesClusterDomain:
                    description: |
                      The domain name for your kubernetes cluster.
                      This domain is documented here: https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/#a-aaaa-records-1 .
                      It's used to fully qualify service names when configuring Pulsar.
                      The default value is 'cluster.local'.
                    type: string
                  tls:
                    description: TLS configuration for the cluster.
                    properties:
                      defaultSecretName:
                        description: Default secret name.
                        type: string
                      broker:
                        description: TLS configurations related to the broker component.
                        properties:
                          enabled:
                            description: Enable tls for this component.
                            type: boolean
                          tlsSecretName:
                            description: Enable certificates for this component.
                            type: string
                        type: object
                      proxy:
                        description: TLS configurations related to the proxy component.
                        properties:
                          enabled:
                            description: Enable tls for this component.
                            type: boolean
                          tlsSecretName:
                            description: Enable certificates for this component.
                            type: string
                        type: object
                      enabled:
                        description: Global switch to turn on or off the TLS configurations.
                        type: boolean
                      zookeeper:
                        description: TLS configurations related to the ZooKeeper component.
                        properties:
                          enabled:
                            description: Enable tls for this component.
                            type: boolean
                          tlsSecretName:
                            description: Enable certificates for this component.
                            type: string
                        type: object
                      bookkeeper:
                        description: TLS configurations related to the BookKeeper
                          component.
                        properties:
                          enabled:
                            description: Enable tls for this component.
                            type: boolean
                          tlsSecretName:
                            description: Enable certificates for this component.
                            type: string
                        type: object
                    type: object
                  name:
                    description: Pulsar cluster base name.
                    type: string
                  nodeSelectors:
                    additionalProperties:
                      type: string
                    description: "Global node selector. If set, this will apply to\
                      \ all components."
                    type: object
                  imagePullPolicy:
                    description: Default Pulsar image pull policy to use. Any components
                      can be configured to use a different image pull policy. Default
                      value is 'IfNotPresent'.
                    type: string
                required:
                - name
                type: object
            type: object
          status:
            properties:
              lastApplied:
                type: string
              conditions:
                items:
                  properties:
                    status:
                      type: string
                    reason:
                      type: string
                    lastTransitionTime:
                      type: string
                    observedGeneration:
                      type: integer
                    type:
                      type: string
                    message:
                      type: string
                  type: object
                type: array
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
