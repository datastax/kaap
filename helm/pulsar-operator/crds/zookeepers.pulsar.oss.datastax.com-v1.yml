# Generated by Fabric8 CRDGenerator, manual edits might get overwritten!
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: zookeepers.pulsar.oss.datastax.com
spec:
  group: pulsar.oss.datastax.com
  names:
    kind: ZooKeeper
    plural: zookeepers
    shortNames:
    - zk
    singular: zookeeper
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              zookeeper:
                properties:
                  metadataInitializationJob:
                    description: Configuration about the job that initializes the
                      Pulsar cluster creating the needed ZooKeeper nodes.
                    properties:
                      resources:
                        description: Resources requirements.
                        properties:
                          limits:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              x-kubernetes-int-or-string: true
                            type: object
                          requests:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              x-kubernetes-int-or-string: true
                            type: object
                        type: object
                      timeout:
                        description: Timeout (in seconds) for the metadata initialization
                          execution. Default value is 60.
                        type: integer
                    type: object
                  updateStrategy:
                    description: Update strategy for the StatefulSet. Default value
                      is rolling update.
                    properties:
                      type:
                        type: string
                      rollingUpdate:
                        properties:
                          maxUnavailable:
                            anyOf:
                            - type: integer
                            - type: string
                            x-kubernetes-int-or-string: true
                          partition:
                            type: integer
                        type: object
                    type: object
                  gracePeriod:
                    description: Termination grace period in seconds.
                    minimum: 0.0
                    type: integer
                  service:
                    description: Service configuration.
                    properties:
                      additionalPorts:
                        description: Additional ports to add to the Service.
                        items:
                          properties:
                            targetPort:
                              anyOf:
                              - type: integer
                              - type: string
                              x-kubernetes-int-or-string: true
                            port:
                              type: integer
                            nodePort:
                              type: integer
                            name:
                              type: string
                            appProtocol:
                              type: string
                            protocol:
                              type: string
                          type: object
                        type: array
                      annotations:
                        additionalProperties:
                          type: string
                        description: Additional annotations to add to the Service.
                        type: object
                    type: object
                  annotations:
                    additionalProperties:
                      type: string
                    description: Annotations to add to each resource.
                    type: object
                  podManagementPolicy:
                    description: Pod management policy. Default value is 'Parallel'.
                    type: string
                  dataVolume:
                    description: Volume configuration for ZooKeeper data.
                    properties:
                      storageClass:
                        description: Indicates if a StorageClass is used. The operator
                          will create the StorageClass if needed.
                        properties:
                          extraParams:
                            additionalProperties:
                              type: string
                            description: Adds extra parameters for the StorageClass.
                            type: object
                          provisioner:
                            description: Indicates the provisioner property for the
                              StorageClass.
                            type: string
                          type:
                            description: Indicates the 'type' parameter for the StorageClass.
                            type: string
                          fsType:
                            description: Indicates the 'fsType' parameter for the
                              StorageClass.
                            type: string
                          reclaimPolicy:
                            description: Indicates the reclaimPolicy property for
                              the StorageClass.
                            type: string
                        type: object
                      size:
                        description: Indicates the requested size for the volume.
                          The format follows the Kubernetes' Quantity.
                        type: string
                      name:
                        description: Indicates the suffix for the volume. Default
                          value is 'data'.
                        type: string
                      existingStorageClassName:
                        description: Indicates if an already existing storage class
                          should be used.
                        type: string
                    type: object
                  resources:
                    description: Resources requirements.
                    properties:
                      limits:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          x-kubernetes-int-or-string: true
                        type: object
                      requests:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          x-kubernetes-int-or-string: true
                        type: object
                    type: object
                  config:
                    additionalProperties:
                      type: string
                    description: Configuration.
                    type: object
                  probe:
                    description: Liveness and readiness probe values.
                    properties:
                      period:
                        description: Indicates the period (in seconds) for the probe.
                        type: integer
                      timeout:
                        description: Indicates the timeout (in seconds) for the probe.
                        type: integer
                      initial:
                        description: Indicates the initial delay (in seconds) for
                          the probe.
                        type: integer
                      enabled:
                        description: Enables the probe.
                        type: boolean
                    type: object
                  replicas:
                    description: Number of desired replicas.
                    type: integer
                  pdb:
                    description: Pod disruption budget configuration.
                    properties:
                      maxUnavailable:
                        description: Number of maxUnavailable pods.
                        type: integer
                      enabled:
                        description: Enable Pdb policy.
                        type: boolean
                    type: object
                  image:
                    description: Override Pulsar image.
                    type: string
                  nodeSelectors:
                    additionalProperties:
                      type: string
                    description: Additional node selectors.
                    type: object
                  imagePullPolicy:
                    description: Override image pull policy.
                    type: string
                type: object
              global:
                properties:
                  components:
                    description: Pulsar cluster components names.
                    properties:
                      brokerBaseName:
                        description: Broker base name. Default value is 'broker'.
                        type: string
                      zookeeperBaseName:
                        description: Zookeeper base name. Default value is 'zookeeper'.
                        type: string
                      functionsWorkerBaseName:
                        description: Functions Worker base name. Default value is
                          'function'.
                        type: string
                      autorecoveryBaseName:
                        description: Autorecovery base name. Default value is 'autorecovery'.
                        type: string
                      bookkeeperBaseName:
                        description: BookKeeper base name. Default value is 'bookkeeper'.
                        type: string
                      bastionBaseName:
                        description: Bastion base name. Default value is 'bastion'.
                        type: string
                      proxyBaseName:
                        description: Proxy base name. Default value is 'proxy'.
                        type: string
                    type: object
                  tls:
                    description: TLS configuration for the cluster.
                    properties:
                      bookkeeper:
                        description: TLS configurations related to the BookKeeper
                          component.
                        properties:
                          secretName:
                            description: Override the default secret name from where
                              to load the certificates.
                            type: string
                          enabled:
                            description: Enable TLS.
                            type: boolean
                        type: object
                      defaultSecretName:
                        description: Secret name used by each component to load TLS
                          certificates. Each component can load a different secret
                          by setting the 'secretName' entry in the tls component spec.
                        type: string
                      broker:
                        description: TLS configurations related to the Broker component.
                        properties:
                          secretName:
                            description: Override the default secret name from where
                              to load the certificates.
                            type: string
                          enabled:
                            description: Enable TLS.
                            type: boolean
                        type: object
                      functionsWorker:
                        description: TLS configurations related to the Functions worker
                          component.
                        properties:
                          enabledWithBroker:
                            description: Enable TLS for the functions worker to broker
                              connections.
                            type: boolean
                          secretName:
                            description: Override the default secret name from where
                              to load the certificates.
                            type: string
                          enabled:
                            description: Enable TLS.
                            type: boolean
                        type: object
                      ssCa:
                        description: "TLS configurations used by additional components,\
                          \ such as the Bastion component."
                        properties:
                          secretName:
                            description: Override the default secret name from where
                              to load the certificates.
                            type: string
                          enabled:
                            description: Enable TLS.
                            type: boolean
                        type: object
                      enabled:
                        description: "Global switch to turn on or off the TLS configurations.\
                          \ Additionally, you have configure each component section."
                        type: boolean
                      certProvisioner:
                        description: Certificate provisioner configuration.
                        properties:
                          selfSigned:
                            description: Self signed certificate provisioner configuration.
                            properties:
                              includeDns:
                                description: Include dns name in the DNS names covered
                                  by the certificate.
                                type: boolean
                              privateKey:
                                description: Cert-manager options for generating the
                                  private key.
                                properties:
                                  rotationPolicy:
                                    type: string
                                  encoding:
                                    type: string
                                  algorithm:
                                    type: string
                                  size:
                                    type: integer
                                type: object
                              enabled:
                                description: "Generate self signed certificates for\
                                  \ broker, proxy and functions worker."
                                type: boolean
                            type: object
                        type: object
                      zookeeper:
                        description: TLS configurations related to the ZooKeeper component.
                        properties:
                          secretName:
                            description: Override the default secret name from where
                              to load the certificates.
                            type: string
                          enabled:
                            description: Enable TLS.
                            type: boolean
                        type: object
                      proxy:
                        description: TLS configurations related to the Proxy component.
                        properties:
                          enabledWithBroker:
                            description: Enable TLS for the proxy to broker connections.
                            type: boolean
                          secretName:
                            description: Override the default secret name from where
                              to load the certificates.
                            type: string
                          enabled:
                            description: Enable TLS.
                            type: boolean
                        type: object
                    type: object
                  dnsConfig:
                    description: DNS config for each pod.
                    properties:
                      nameservers:
                        items:
                          type: string
                        type: array
                      searches:
                        items:
                          type: string
                        type: array
                      options:
                        items:
                          properties:
                            value:
                              type: string
                            name:
                              type: string
                          type: object
                        type: array
                    type: object
                  restartOnConfigMapChange:
                    description: |
                      By default, Kubernetes will not restart pods when only their configmap is changed. This setting will restart pods when their configmap is changed using an annotation that calculates the checksum of the configmap.
                    type: boolean
                  image:
                    description: Default Pulsar image to use. Any components can be
                      configured to use a different image.
                    type: string
                  auth:
                    description: |
                      Authentication and authorization configuration.
                    properties:
                      token:
                        description: Token based authentication configuration.
                        properties:
                          privateKeyFile:
                            description: Private key file name stored in the Secret.
                              Default is 'my-private.key'
                            type: string
                          initialize:
                            description: Initialize Secrets with new pair of keys
                              and tokens for the super user roles. The generated Secret
                              name is 'token-<role>'.
                            type: boolean
                          superUserRoles:
                            description: Super user roles.
                            items:
                              type: string
                            type: array
                          proxyRoles:
                            description: Proxy roles.
                            items:
                              type: string
                            type: array
                          publicKeyFile:
                            description: Public key file name stored in the Secret.
                              Default is 'my-public.key'
                            type: string
                        type: object
                      enabled:
                        description: Enable authentication in the cluster. Default
                          is 'false'.
                        type: boolean
                    type: object
                  persistence:
                    description: |
                      If persistence is enabled, components that has state will be deployed with PersistentVolumeClaims, otherwise, for test purposes, they will be deployed with emptDir
                    type: boolean
                  dnsName:
                    description: Public dns name for the cluster's load balancer.
                    type: string
                  storage:
                    description: Storage configuration.
                    properties:
                      storageClass:
                        description: Indicates if a StorageClass is used. The operator
                          will create the StorageClass if needed.
                        properties:
                          extraParams:
                            additionalProperties:
                              type: string
                            description: Adds extra parameters for the StorageClass.
                            type: object
                          provisioner:
                            description: Indicates the provisioner property for the
                              StorageClass.
                            type: string
                          type:
                            description: Indicates the 'type' parameter for the StorageClass.
                            type: string
                          fsType:
                            description: Indicates the 'fsType' parameter for the
                              StorageClass.
                            type: string
                          reclaimPolicy:
                            description: Indicates the reclaimPolicy property for
                              the StorageClass.
                            type: string
                        type: object
                      existingStorageClassName:
                        description: Indicates if an already existing storage class
                          should be used.
                        type: string
                    type: object
                  kubernetesClusterDomain:
                    description: |
                      The domain name for your kubernetes cluster.
                      This domain is documented here: https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/#a-aaaa-records-1 .
                      It's used to fully qualify service names when configuring Pulsar.
                      The default value is 'cluster.local'.
                    type: string
                  name:
                    description: Pulsar cluster name.
                    type: string
                  nodeSelectors:
                    additionalProperties:
                      type: string
                    description: "Global node selector. If set, this will apply to\
                      \ all the components."
                    type: object
                  imagePullPolicy:
                    description: Default Pulsar image pull policy to use. Any components
                      can be configured to use a different image pull policy. Default
                      value is 'IfNotPresent'.
                    type: string
                required:
                - name
                type: object
            type: object
          status:
            properties:
              lastApplied:
                description: Last spec applied.
                type: string
              conditions:
                description: |-
                  Conditions:
                   1. Condition Ready: possible status are True or False. If False, the reason contains the error message.
                items:
                  properties:
                    status:
                      type: string
                    reason:
                      type: string
                    lastTransitionTime:
                      type: string
                    observedGeneration:
                      type: integer
                    type:
                      type: string
                    message:
                      type: string
                  type: object
                type: array
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
